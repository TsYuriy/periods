<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        class dateInput {
            constructor() {
                this.input = document.querySelector("input");
                this.input.onchange = (event) => {
                    this.onChange(event);

                }
            }

            onChange(event) {
                this.inputValue = new Date(event.srcElement.value);
                this.updateTime = new Date();

                return this.inputValue;
            }

        }

        class dateRange extends dateInput {
            constructor() {
                super();
                this.container = document.querySelector('.containerForLastUpdateRecordAndPeriodItems');
            }

            createItems(period) {
                console.log(period);
                let dates = [];
                for (let i = +period.start; i < +period.end; i += 3600000 * 168) {
                    dates.push(i);
                }

                let periods = [];
                for (let i = 0; i < dates.length; i++) {
                    let date = new Date(dates[i]);

                    let i1, i2;
                    if (date.getDay() == 1) {
                        i1 = date.toLocaleDateString();
                        i2 = new Date(date.setHours(168)).toLocaleDateString();
                    } else if (date.getDay() == 2) {
                        i1 = new Date(date.setHours(-24)).toLocaleDateString();
                        i2 = new Date(date.setHours(144)).toLocaleDateString();
                    } else if (date.getDay() == 3) {
                        i1 = new Date(date.setHours(-48)).toLocaleDateString();
                        i2 = new Date(date.setHours(120)).toLocaleDateString();
                    } else if (date.getDay() == 4) {
                        i1 = new Date(date.setHours(-72)).toLocaleDateString();
                        i2 = new Date(date.setHours(96)).toLocaleDateString();
                    } else if (date.getDay() == 5) {
                        i1 = new Date(date.setHours(-96)).toLocaleDateString();
                        i2 = new Date(date.setHours(72)).toLocaleDateString();
                    } else if (date.getDay() == 6) {
                        i1 = new Date(date.setHours(-120)).toLocaleDateString();
                        i2 = new Date(date.setHours(48)).toLocaleDateString();
                    }else if (date.getDay() == 0) {
                        i1 = new Date(date.setHours(-144)).toLocaleDateString();
                        i2 = new Date(date.setHours(24)).toLocaleDateString();
                    }

                    period[i] = `${i1} - ${i2}`;

                    let n = periods.length, a = periods.length;
                    let b = false;
                    do {
                        a /= 1.3;
                        if (a == 9 || a == 10) a = 11;
                        if (a < 1) a = 1;
                        for (let i = 0; i < n - a; ++i) {
                            if (periods[i] > periods[i + a]) {
                                b = true;
                                let t = periods[i + a];
                                periods[i + a] = periods[i];
                                periods[i] = t;
                            }
                        }
                    } while (a > 1 || b);
                }
                return periods;
            }

            renderItems(items) {
                let element = document.createElement('div');
                this.container.appendChild(element);
                let sss = this.updateTime.getDate() + '.' + this.updateTime.getMonth();
                let ssss = sss > 9 ? '0' + this.updateTime.getMonth() : this.updateTime.getMonth();

                element.innerText = `Последнее изменение: ${sss}`;

                items.forEach(function (item) {
                    let element2 = document.createElement('div', {innerText: item});
                    this.container.appendChild(element2);
                });
            }

            createPeriod(date) {
                let d = date || new Date();
                let year = d.getFullYear();
                let month = d.getMonth();
                let day = d.getDate();
                let newDate = new Date(year + 1, month, day);


                return {
                    start: date,
                    end: newDate
                }
            }

            onChange(event) {
                super.onChange(event);
                this.renderItems(
                    this.createItems(
                        this.createPeriod(this.inputValue)));
            }
        }


    </script>
</head>
<body>
<div class="input"><input type='date'/></div>
<div class="containerForLastUpdateRecordAndPeriodItems"></div>
<script>
    new dateRange();
    //new dateInput();

    //const range = Object.create(dateRange.prototype);
    //range.constructor = range.constructor.bind(range);
    //range.constructor();
</script>
<p>Найдите ошибки в коде или отрефакторите его. Обратите внимание, в тест специально включены задачи разного уровня и
    направлений программирования. Нам важно понять уровень ваших знаний и в "ширину", и в "глубину". Если вы не можете
    выполнить какую либо из частей - это не повод сдаваться. Это повод сделать все на что вы способны в рамках ваших
    текущих знаний. Это поможет нам понять, на чём с вами предстоит сделать упор при потенциальной совместной работе.
    Удачи!
    В этом компоненте в календаре выбирается дата и по ней отображается список периодов. Периоды это недельные
    промежутки с понедельника по воскресенье, входящие в годовой отрезок времени, начинающийся с выбранного числа.
    Если вы знаете typeScript можно использовать его.</p>
</body>
</html>
</html>